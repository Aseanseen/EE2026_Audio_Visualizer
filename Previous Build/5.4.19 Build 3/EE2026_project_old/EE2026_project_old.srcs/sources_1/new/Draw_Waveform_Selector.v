`timescale 1ns / 1ps
/**
 * Waveform Drawer Selector
 * Controls which waveforms to display
 */

module Draw_Waveform_Selector(
    input clk_sample, //20kHz clock
    input SW0, SW15,
    input [5:0] mode,
    input [2:0] waveformstate,
    input [9:0] wave_sample,
    input [9:0] freq_sample,
    input [11:0] VGA_HORZ_COORD,
    input [11:0] VGA_VERT_COORD,
    input [11:0] colour,
    
    output [3:0] VGA_Red_waveform,
    output [3:0] VGA_Green_waveform,
    output [3:0] VGA_Blue_waveform
    );
	
	//Regs for memory
	reg [9:0] Memory[1279:0];
    reg [10:0] i = 1; //counter for memory
    reg [9:0] ramp_count;
    
    reg [5:0] counter = 0;
    reg [9:0] prev;
    reg [9:0] maxWave;
    
    //overall VGA Regs to assign to
    reg [3:0] vga_red;
    reg [3:0] vga_green;
    reg [3:0] vga_blue;
    
    //VGA Reg for Draw_Waveform_Mode
    wire [3:0] vga_mode_red;
    wire [3:0] vga_mode_green;
    wire [3:0] vga_mode_blue;
    
    //VGA Reg for Draw_Waveform_History;
    wire [3:0] vga_hist_red;
    wire [3:0] vga_hist_green;
    wire [3:0] vga_hist_blue;
    
	
    
    always @ (posedge clk_sample) begin
		if (mode <= 4) begin //regular waveform display
			i = (i == 1279) ? 0 : i + 1;
			
			if (SW15 == 1) begin
				ramp_count <= 0;
				i <= 0;
			end
			
			if (SW15 == 0) begin
				//filled waveform code (so that it doesn't look terrible)
				if (waveformstate == 1) begin
					counter <= (counter >= 1 ? 0 : counter + 1);
					maxWave <= (wave_sample > maxWave ? wave_sample : maxWave);
				end
				
				//block wave specific code (gets the peak vol per interval)
				if (waveformstate == 2) begin
					counter <= (counter >= 39 ? 0 : counter + 1);
					maxWave <= (wave_sample > maxWave ? wave_sample : maxWave);
				end
				
				
				ramp_count = (ramp_count >= 639) ? 0 : ramp_count + 1;
				
				//determine what to assign to each block
				if (waveformstate == 0) begin
					Memory[i] <= (SW0 == 1) ? prev : ramp_count;
					prev <= wave_sample;
				end
				
				if (waveformstate == 1) begin
					Memory[i] <= prev;
					if (counter == 0) begin
						prev <= wave_sample;
						maxWave <= 0;
					end
				end
				
				if (waveformstate == 2) begin
					Memory[i] <= (prev <= 512 ? 512 : prev);
					if (counter == 0) begin
						prev <= maxWave;
						maxWave <= 0;
					end
				end
			end
			
		end
		
		if (mode == 5) begin //waveform history display
			counter <= (counter >= 99 ? 0 : counter + 1);
			//re-allocation of memory
			if (counter == 0) begin
				Memory[1278] <= Memory[1279];
				Memory[1277] <= Memory[1278];
				Memory[1276] <= Memory[1277];
				Memory[1275] <= Memory[1276];
				Memory[1274] <= Memory[1275];
				Memory[1273] <= Memory[1274];
				Memory[1272] <= Memory[1273];
				Memory[1271] <= Memory[1272];
				Memory[1270] <= Memory[1271];
				Memory[1269] <= Memory[1270];
				Memory[1268] <= Memory[1269];
				Memory[1267] <= Memory[1268];
				Memory[1266] <= Memory[1267];
				Memory[1265] <= Memory[1266];
				Memory[1264] <= Memory[1265];
				Memory[1263] <= Memory[1264];
				Memory[1262] <= Memory[1263];
				Memory[1261] <= Memory[1262];
				Memory[1260] <= Memory[1261];
				Memory[1259] <= Memory[1260];
				Memory[1258] <= Memory[1259];
				Memory[1257] <= Memory[1258];
				Memory[1256] <= Memory[1257];
				Memory[1255] <= Memory[1256];
				Memory[1254] <= Memory[1255];
				Memory[1253] <= Memory[1254];
				Memory[1252] <= Memory[1253];
				Memory[1251] <= Memory[1252];
				Memory[1250] <= Memory[1251];
				Memory[1249] <= Memory[1250];
				Memory[1248] <= Memory[1249];
				Memory[1247] <= Memory[1248];
				Memory[1246] <= Memory[1247];
				Memory[1245] <= Memory[1246];
				Memory[1244] <= Memory[1245];
				Memory[1243] <= Memory[1244];
				Memory[1242] <= Memory[1243];
				Memory[1241] <= Memory[1242];
				Memory[1240] <= Memory[1241];
				Memory[1239] <= Memory[1240];
				Memory[1238] <= Memory[1239];
				Memory[1237] <= Memory[1238];
				Memory[1236] <= Memory[1237];
				Memory[1235] <= Memory[1236];
				Memory[1234] <= Memory[1235];
				Memory[1233] <= Memory[1234];
				Memory[1232] <= Memory[1233];
				Memory[1231] <= Memory[1232];
				Memory[1230] <= Memory[1231];
				Memory[1229] <= Memory[1230];
				Memory[1228] <= Memory[1229];
				Memory[1227] <= Memory[1228];
				Memory[1226] <= Memory[1227];
				Memory[1225] <= Memory[1226];
				Memory[1224] <= Memory[1225];
				Memory[1223] <= Memory[1224];
				Memory[1222] <= Memory[1223];
				Memory[1221] <= Memory[1222];
				Memory[1220] <= Memory[1221];
				Memory[1219] <= Memory[1220];
				Memory[1218] <= Memory[1219];
				Memory[1217] <= Memory[1218];
				Memory[1216] <= Memory[1217];
				Memory[1215] <= Memory[1216];
				Memory[1214] <= Memory[1215];
				Memory[1213] <= Memory[1214];
				Memory[1212] <= Memory[1213];
				Memory[1211] <= Memory[1212];
				Memory[1210] <= Memory[1211];
				Memory[1209] <= Memory[1210];
				Memory[1208] <= Memory[1209];
				Memory[1207] <= Memory[1208];
				Memory[1206] <= Memory[1207];
				Memory[1205] <= Memory[1206];
				Memory[1204] <= Memory[1205];
				Memory[1203] <= Memory[1204];
				Memory[1202] <= Memory[1203];
				Memory[1201] <= Memory[1202];
				Memory[1200] <= Memory[1201];
				Memory[1199] <= Memory[1200];
				Memory[1198] <= Memory[1199];
				Memory[1197] <= Memory[1198];
				Memory[1196] <= Memory[1197];
				Memory[1195] <= Memory[1196];
				Memory[1194] <= Memory[1195];
				Memory[1193] <= Memory[1194];
				Memory[1192] <= Memory[1193];
				Memory[1191] <= Memory[1192];
				Memory[1190] <= Memory[1191];
				Memory[1189] <= Memory[1190];
				Memory[1188] <= Memory[1189];
				Memory[1187] <= Memory[1188];
				Memory[1186] <= Memory[1187];
				Memory[1185] <= Memory[1186];
				Memory[1184] <= Memory[1185];
				Memory[1183] <= Memory[1184];
				Memory[1182] <= Memory[1183];
				Memory[1181] <= Memory[1182];
				Memory[1180] <= Memory[1181];
				Memory[1179] <= Memory[1180];
				Memory[1178] <= Memory[1179];
				Memory[1177] <= Memory[1178];
				Memory[1176] <= Memory[1177];
				Memory[1175] <= Memory[1176];
				Memory[1174] <= Memory[1175];
				Memory[1173] <= Memory[1174];
				Memory[1172] <= Memory[1173];
				Memory[1171] <= Memory[1172];
				Memory[1170] <= Memory[1171];
				Memory[1169] <= Memory[1170];
				Memory[1168] <= Memory[1169];
				Memory[1167] <= Memory[1168];
				Memory[1166] <= Memory[1167];
				Memory[1165] <= Memory[1166];
				Memory[1164] <= Memory[1165];
				Memory[1163] <= Memory[1164];
				Memory[1162] <= Memory[1163];
				Memory[1161] <= Memory[1162];
				Memory[1160] <= Memory[1161];
				Memory[1159] <= Memory[1160];
				Memory[1158] <= Memory[1159];
				Memory[1157] <= Memory[1158];
				Memory[1156] <= Memory[1157];
				Memory[1155] <= Memory[1156];
				Memory[1154] <= Memory[1155];
				Memory[1153] <= Memory[1154];
				Memory[1152] <= Memory[1153];
				Memory[1151] <= Memory[1152];
				Memory[1150] <= Memory[1151];
				Memory[1149] <= Memory[1150];
				Memory[1148] <= Memory[1149];
				Memory[1147] <= Memory[1148];
				Memory[1146] <= Memory[1147];
				Memory[1145] <= Memory[1146];
				Memory[1144] <= Memory[1145];
				Memory[1143] <= Memory[1144];
				Memory[1142] <= Memory[1143];
				Memory[1141] <= Memory[1142];
				Memory[1140] <= Memory[1141];
				Memory[1139] <= Memory[1140];
				Memory[1138] <= Memory[1139];
				Memory[1137] <= Memory[1138];
				Memory[1136] <= Memory[1137];
				Memory[1135] <= Memory[1136];
				Memory[1134] <= Memory[1135];
				Memory[1133] <= Memory[1134];
				Memory[1132] <= Memory[1133];
				Memory[1131] <= Memory[1132];
				Memory[1130] <= Memory[1131];
				Memory[1129] <= Memory[1130];
				Memory[1128] <= Memory[1129];
				Memory[1127] <= Memory[1128];
				Memory[1126] <= Memory[1127];
				Memory[1125] <= Memory[1126];
				Memory[1124] <= Memory[1125];
				Memory[1123] <= Memory[1124];
				Memory[1122] <= Memory[1123];
				Memory[1121] <= Memory[1122];
				Memory[1120] <= Memory[1121];
				Memory[1119] <= Memory[1120];
				Memory[1118] <= Memory[1119];
				Memory[1117] <= Memory[1118];
				Memory[1116] <= Memory[1117];
				Memory[1115] <= Memory[1116];
				Memory[1114] <= Memory[1115];
				Memory[1113] <= Memory[1114];
				Memory[1112] <= Memory[1113];
				Memory[1111] <= Memory[1112];
				Memory[1110] <= Memory[1111];
				Memory[1109] <= Memory[1110];
				Memory[1108] <= Memory[1109];
				Memory[1107] <= Memory[1108];
				Memory[1106] <= Memory[1107];
				Memory[1105] <= Memory[1106];
				Memory[1104] <= Memory[1105];
				Memory[1103] <= Memory[1104];
				Memory[1102] <= Memory[1103];
				Memory[1101] <= Memory[1102];
				Memory[1100] <= Memory[1101];
				Memory[1099] <= Memory[1100];
				Memory[1098] <= Memory[1099];
				Memory[1097] <= Memory[1098];
				Memory[1096] <= Memory[1097];
				Memory[1095] <= Memory[1096];
				Memory[1094] <= Memory[1095];
				Memory[1093] <= Memory[1094];
				Memory[1092] <= Memory[1093];
				Memory[1091] <= Memory[1092];
				Memory[1090] <= Memory[1091];
				Memory[1089] <= Memory[1090];
				Memory[1088] <= Memory[1089];
				Memory[1087] <= Memory[1088];
				Memory[1086] <= Memory[1087];
				Memory[1085] <= Memory[1086];
				Memory[1084] <= Memory[1085];
				Memory[1083] <= Memory[1084];
				Memory[1082] <= Memory[1083];
				Memory[1081] <= Memory[1082];
				Memory[1080] <= Memory[1081];
				Memory[1079] <= Memory[1080];
				Memory[1078] <= Memory[1079];
				Memory[1077] <= Memory[1078];
				Memory[1076] <= Memory[1077];
				Memory[1075] <= Memory[1076];
				Memory[1074] <= Memory[1075];
				Memory[1073] <= Memory[1074];
				Memory[1072] <= Memory[1073];
				Memory[1071] <= Memory[1072];
				Memory[1070] <= Memory[1071];
				Memory[1069] <= Memory[1070];
				Memory[1068] <= Memory[1069];
				Memory[1067] <= Memory[1068];
				Memory[1066] <= Memory[1067];
				Memory[1065] <= Memory[1066];
				Memory[1064] <= Memory[1065];
				Memory[1063] <= Memory[1064];
				Memory[1062] <= Memory[1063];
				Memory[1061] <= Memory[1062];
				Memory[1060] <= Memory[1061];
				Memory[1059] <= Memory[1060];
				Memory[1058] <= Memory[1059];
				Memory[1057] <= Memory[1058];
				Memory[1056] <= Memory[1057];
				Memory[1055] <= Memory[1056];
				Memory[1054] <= Memory[1055];
				Memory[1053] <= Memory[1054];
				Memory[1052] <= Memory[1053];
				Memory[1051] <= Memory[1052];
				Memory[1050] <= Memory[1051];
				Memory[1049] <= Memory[1050];
				Memory[1048] <= Memory[1049];
				Memory[1047] <= Memory[1048];
				Memory[1046] <= Memory[1047];
				Memory[1045] <= Memory[1046];
				Memory[1044] <= Memory[1045];
				Memory[1043] <= Memory[1044];
				Memory[1042] <= Memory[1043];
				Memory[1041] <= Memory[1042];
				Memory[1040] <= Memory[1041];
				Memory[1039] <= Memory[1040];
				Memory[1038] <= Memory[1039];
				Memory[1037] <= Memory[1038];
				Memory[1036] <= Memory[1037];
				Memory[1035] <= Memory[1036];
				Memory[1034] <= Memory[1035];
				Memory[1033] <= Memory[1034];
				Memory[1032] <= Memory[1033];
				Memory[1031] <= Memory[1032];
				Memory[1030] <= Memory[1031];
				Memory[1029] <= Memory[1030];
				Memory[1028] <= Memory[1029];
				Memory[1027] <= Memory[1028];
				Memory[1026] <= Memory[1027];
				Memory[1025] <= Memory[1026];
				Memory[1024] <= Memory[1025];
				Memory[1023] <= Memory[1024];
				Memory[1022] <= Memory[1023];
				Memory[1021] <= Memory[1022];
				Memory[1020] <= Memory[1021];
				Memory[1019] <= Memory[1020];
				Memory[1018] <= Memory[1019];
				Memory[1017] <= Memory[1018];
				Memory[1016] <= Memory[1017];
				Memory[1015] <= Memory[1016];
				Memory[1014] <= Memory[1015];
				Memory[1013] <= Memory[1014];
				Memory[1012] <= Memory[1013];
				Memory[1011] <= Memory[1012];
				Memory[1010] <= Memory[1011];
				Memory[1009] <= Memory[1010];
				Memory[1008] <= Memory[1009];
				Memory[1007] <= Memory[1008];
				Memory[1006] <= Memory[1007];
				Memory[1005] <= Memory[1006];
				Memory[1004] <= Memory[1005];
				Memory[1003] <= Memory[1004];
				Memory[1002] <= Memory[1003];
				Memory[1001] <= Memory[1002];
				Memory[1000] <= Memory[1001];
				Memory[999] <= Memory[1000];
				Memory[998] <= Memory[999];
				Memory[997] <= Memory[998];
				Memory[996] <= Memory[997];
				Memory[995] <= Memory[996];
				Memory[994] <= Memory[995];
				Memory[993] <= Memory[994];
				Memory[992] <= Memory[993];
				Memory[991] <= Memory[992];
				Memory[990] <= Memory[991];
				Memory[989] <= Memory[990];
				Memory[988] <= Memory[989];
				Memory[987] <= Memory[988];
				Memory[986] <= Memory[987];
				Memory[985] <= Memory[986];
				Memory[984] <= Memory[985];
				Memory[983] <= Memory[984];
				Memory[982] <= Memory[983];
				Memory[981] <= Memory[982];
				Memory[980] <= Memory[981];
				Memory[979] <= Memory[980];
				Memory[978] <= Memory[979];
				Memory[977] <= Memory[978];
				Memory[976] <= Memory[977];
				Memory[975] <= Memory[976];
				Memory[974] <= Memory[975];
				Memory[973] <= Memory[974];
				Memory[972] <= Memory[973];
				Memory[971] <= Memory[972];
				Memory[970] <= Memory[971];
				Memory[969] <= Memory[970];
				Memory[968] <= Memory[969];
				Memory[967] <= Memory[968];
				Memory[966] <= Memory[967];
				Memory[965] <= Memory[966];
				Memory[964] <= Memory[965];
				Memory[963] <= Memory[964];
				Memory[962] <= Memory[963];
				Memory[961] <= Memory[962];
				Memory[960] <= Memory[961];
				Memory[959] <= Memory[960];
				Memory[958] <= Memory[959];
				Memory[957] <= Memory[958];
				Memory[956] <= Memory[957];
				Memory[955] <= Memory[956];
				Memory[954] <= Memory[955];
				Memory[953] <= Memory[954];
				Memory[952] <= Memory[953];
				Memory[951] <= Memory[952];
				Memory[950] <= Memory[951];
				Memory[949] <= Memory[950];
				Memory[948] <= Memory[949];
				Memory[947] <= Memory[948];
				Memory[946] <= Memory[947];
				Memory[945] <= Memory[946];
				Memory[944] <= Memory[945];
				Memory[943] <= Memory[944];
				Memory[942] <= Memory[943];
				Memory[941] <= Memory[942];
				Memory[940] <= Memory[941];
				Memory[939] <= Memory[940];
				Memory[938] <= Memory[939];
				Memory[937] <= Memory[938];
				Memory[936] <= Memory[937];
				Memory[935] <= Memory[936];
				Memory[934] <= Memory[935];
				Memory[933] <= Memory[934];
				Memory[932] <= Memory[933];
				Memory[931] <= Memory[932];
				Memory[930] <= Memory[931];
				Memory[929] <= Memory[930];
				Memory[928] <= Memory[929];
				Memory[927] <= Memory[928];
				Memory[926] <= Memory[927];
				Memory[925] <= Memory[926];
				Memory[924] <= Memory[925];
				Memory[923] <= Memory[924];
				Memory[922] <= Memory[923];
				Memory[921] <= Memory[922];
				Memory[920] <= Memory[921];
				Memory[919] <= Memory[920];
				Memory[918] <= Memory[919];
				Memory[917] <= Memory[918];
				Memory[916] <= Memory[917];
				Memory[915] <= Memory[916];
				Memory[914] <= Memory[915];
				Memory[913] <= Memory[914];
				Memory[912] <= Memory[913];
				Memory[911] <= Memory[912];
				Memory[910] <= Memory[911];
				Memory[909] <= Memory[910];
				Memory[908] <= Memory[909];
				Memory[907] <= Memory[908];
				Memory[906] <= Memory[907];
				Memory[905] <= Memory[906];
				Memory[904] <= Memory[905];
				Memory[903] <= Memory[904];
				Memory[902] <= Memory[903];
				Memory[901] <= Memory[902];
				Memory[900] <= Memory[901];
				Memory[899] <= Memory[900];
				Memory[898] <= Memory[899];
				Memory[897] <= Memory[898];
				Memory[896] <= Memory[897];
				Memory[895] <= Memory[896];
				Memory[894] <= Memory[895];
				Memory[893] <= Memory[894];
				Memory[892] <= Memory[893];
				Memory[891] <= Memory[892];
				Memory[890] <= Memory[891];
				Memory[889] <= Memory[890];
				Memory[888] <= Memory[889];
				Memory[887] <= Memory[888];
				Memory[886] <= Memory[887];
				Memory[885] <= Memory[886];
				Memory[884] <= Memory[885];
				Memory[883] <= Memory[884];
				Memory[882] <= Memory[883];
				Memory[881] <= Memory[882];
				Memory[880] <= Memory[881];
				Memory[879] <= Memory[880];
				Memory[878] <= Memory[879];
				Memory[877] <= Memory[878];
				Memory[876] <= Memory[877];
				Memory[875] <= Memory[876];
				Memory[874] <= Memory[875];
				Memory[873] <= Memory[874];
				Memory[872] <= Memory[873];
				Memory[871] <= Memory[872];
				Memory[870] <= Memory[871];
				Memory[869] <= Memory[870];
				Memory[868] <= Memory[869];
				Memory[867] <= Memory[868];
				Memory[866] <= Memory[867];
				Memory[865] <= Memory[866];
				Memory[864] <= Memory[865];
				Memory[863] <= Memory[864];
				Memory[862] <= Memory[863];
				Memory[861] <= Memory[862];
				Memory[860] <= Memory[861];
				Memory[859] <= Memory[860];
				Memory[858] <= Memory[859];
				Memory[857] <= Memory[858];
				Memory[856] <= Memory[857];
				Memory[855] <= Memory[856];
				Memory[854] <= Memory[855];
				Memory[853] <= Memory[854];
				Memory[852] <= Memory[853];
				Memory[851] <= Memory[852];
				Memory[850] <= Memory[851];
				Memory[849] <= Memory[850];
				Memory[848] <= Memory[849];
				Memory[847] <= Memory[848];
				Memory[846] <= Memory[847];
				Memory[845] <= Memory[846];
				Memory[844] <= Memory[845];
				Memory[843] <= Memory[844];
				Memory[842] <= Memory[843];
				Memory[841] <= Memory[842];
				Memory[840] <= Memory[841];
				Memory[839] <= Memory[840];
				Memory[838] <= Memory[839];
				Memory[837] <= Memory[838];
				Memory[836] <= Memory[837];
				Memory[835] <= Memory[836];
				Memory[834] <= Memory[835];
				Memory[833] <= Memory[834];
				Memory[832] <= Memory[833];
				Memory[831] <= Memory[832];
				Memory[830] <= Memory[831];
				Memory[829] <= Memory[830];
				Memory[828] <= Memory[829];
				Memory[827] <= Memory[828];
				Memory[826] <= Memory[827];
				Memory[825] <= Memory[826];
				Memory[824] <= Memory[825];
				Memory[823] <= Memory[824];
				Memory[822] <= Memory[823];
				Memory[821] <= Memory[822];
				Memory[820] <= Memory[821];
				Memory[819] <= Memory[820];
				Memory[818] <= Memory[819];
				Memory[817] <= Memory[818];
				Memory[816] <= Memory[817];
				Memory[815] <= Memory[816];
				Memory[814] <= Memory[815];
				Memory[813] <= Memory[814];
				Memory[812] <= Memory[813];
				Memory[811] <= Memory[812];
				Memory[810] <= Memory[811];
				Memory[809] <= Memory[810];
				Memory[808] <= Memory[809];
				Memory[807] <= Memory[808];
				Memory[806] <= Memory[807];
				Memory[805] <= Memory[806];
				Memory[804] <= Memory[805];
				Memory[803] <= Memory[804];
				Memory[802] <= Memory[803];
				Memory[801] <= Memory[802];
				Memory[800] <= Memory[801];
				Memory[799] <= Memory[800];
				Memory[798] <= Memory[799];
				Memory[797] <= Memory[798];
				Memory[796] <= Memory[797];
				Memory[795] <= Memory[796];
				Memory[794] <= Memory[795];
				Memory[793] <= Memory[794];
				Memory[792] <= Memory[793];
				Memory[791] <= Memory[792];
				Memory[790] <= Memory[791];
				Memory[789] <= Memory[790];
				Memory[788] <= Memory[789];
				Memory[787] <= Memory[788];
				Memory[786] <= Memory[787];
				Memory[785] <= Memory[786];
				Memory[784] <= Memory[785];
				Memory[783] <= Memory[784];
				Memory[782] <= Memory[783];
				Memory[781] <= Memory[782];
				Memory[780] <= Memory[781];
				Memory[779] <= Memory[780];
				Memory[778] <= Memory[779];
				Memory[777] <= Memory[778];
				Memory[776] <= Memory[777];
				Memory[775] <= Memory[776];
				Memory[774] <= Memory[775];
				Memory[773] <= Memory[774];
				Memory[772] <= Memory[773];
				Memory[771] <= Memory[772];
				Memory[770] <= Memory[771];
				Memory[769] <= Memory[770];
				Memory[768] <= Memory[769];
				Memory[767] <= Memory[768];
				Memory[766] <= Memory[767];
				Memory[765] <= Memory[766];
				Memory[764] <= Memory[765];
				Memory[763] <= Memory[764];
				Memory[762] <= Memory[763];
				Memory[761] <= Memory[762];
				Memory[760] <= Memory[761];
				Memory[759] <= Memory[760];
				Memory[758] <= Memory[759];
				Memory[757] <= Memory[758];
				Memory[756] <= Memory[757];
				Memory[755] <= Memory[756];
				Memory[754] <= Memory[755];
				Memory[753] <= Memory[754];
				Memory[752] <= Memory[753];
				Memory[751] <= Memory[752];
				Memory[750] <= Memory[751];
				Memory[749] <= Memory[750];
				Memory[748] <= Memory[749];
				Memory[747] <= Memory[748];
				Memory[746] <= Memory[747];
				Memory[745] <= Memory[746];
				Memory[744] <= Memory[745];
				Memory[743] <= Memory[744];
				Memory[742] <= Memory[743];
				Memory[741] <= Memory[742];
				Memory[740] <= Memory[741];
				Memory[739] <= Memory[740];
				Memory[738] <= Memory[739];
				Memory[737] <= Memory[738];
				Memory[736] <= Memory[737];
				Memory[735] <= Memory[736];
				Memory[734] <= Memory[735];
				Memory[733] <= Memory[734];
				Memory[732] <= Memory[733];
				Memory[731] <= Memory[732];
				Memory[730] <= Memory[731];
				Memory[729] <= Memory[730];
				Memory[728] <= Memory[729];
				Memory[727] <= Memory[728];
				Memory[726] <= Memory[727];
				Memory[725] <= Memory[726];
				Memory[724] <= Memory[725];
				Memory[723] <= Memory[724];
				Memory[722] <= Memory[723];
				Memory[721] <= Memory[722];
				Memory[720] <= Memory[721];
				Memory[719] <= Memory[720];
				Memory[718] <= Memory[719];
				Memory[717] <= Memory[718];
				Memory[716] <= Memory[717];
				Memory[715] <= Memory[716];
				Memory[714] <= Memory[715];
				Memory[713] <= Memory[714];
				Memory[712] <= Memory[713];
				Memory[711] <= Memory[712];
				Memory[710] <= Memory[711];
				Memory[709] <= Memory[710];
				Memory[708] <= Memory[709];
				Memory[707] <= Memory[708];
				Memory[706] <= Memory[707];
				Memory[705] <= Memory[706];
				Memory[704] <= Memory[705];
				Memory[703] <= Memory[704];
				Memory[702] <= Memory[703];
				Memory[701] <= Memory[702];
				Memory[700] <= Memory[701];
				Memory[699] <= Memory[700];
				Memory[698] <= Memory[699];
				Memory[697] <= Memory[698];
				Memory[696] <= Memory[697];
				Memory[695] <= Memory[696];
				Memory[694] <= Memory[695];
				Memory[693] <= Memory[694];
				Memory[692] <= Memory[693];
				Memory[691] <= Memory[692];
				Memory[690] <= Memory[691];
				Memory[689] <= Memory[690];
				Memory[688] <= Memory[689];
				Memory[687] <= Memory[688];
				Memory[686] <= Memory[687];
				Memory[685] <= Memory[686];
				Memory[684] <= Memory[685];
				Memory[683] <= Memory[684];
				Memory[682] <= Memory[683];
				Memory[681] <= Memory[682];
				Memory[680] <= Memory[681];
				Memory[679] <= Memory[680];
				Memory[678] <= Memory[679];
				Memory[677] <= Memory[678];
				Memory[676] <= Memory[677];
				Memory[675] <= Memory[676];
				Memory[674] <= Memory[675];
				Memory[673] <= Memory[674];
				Memory[672] <= Memory[673];
				Memory[671] <= Memory[672];
				Memory[670] <= Memory[671];
				Memory[669] <= Memory[670];
				Memory[668] <= Memory[669];
				Memory[667] <= Memory[668];
				Memory[666] <= Memory[667];
				Memory[665] <= Memory[666];
				Memory[664] <= Memory[665];
				Memory[663] <= Memory[664];
				Memory[662] <= Memory[663];
				Memory[661] <= Memory[662];
				Memory[660] <= Memory[661];
				Memory[659] <= Memory[660];
				Memory[658] <= Memory[659];
				Memory[657] <= Memory[658];
				Memory[656] <= Memory[657];
				Memory[655] <= Memory[656];
				Memory[654] <= Memory[655];
				Memory[653] <= Memory[654];
				Memory[652] <= Memory[653];
				Memory[651] <= Memory[652];
				Memory[650] <= Memory[651];
				Memory[649] <= Memory[650];
				Memory[648] <= Memory[649];
				Memory[647] <= Memory[648];
				Memory[646] <= Memory[647];
				Memory[645] <= Memory[646];
				Memory[644] <= Memory[645];
				Memory[643] <= Memory[644];
				Memory[642] <= Memory[643];
				Memory[641] <= Memory[642];
				Memory[640] <= Memory[641];
				Memory[639] <= Memory[640];
				Memory[638] <= Memory[639];
				Memory[637] <= Memory[638];
				Memory[636] <= Memory[637];
				Memory[635] <= Memory[636];
				Memory[634] <= Memory[635];
				Memory[633] <= Memory[634];
				Memory[632] <= Memory[633];
				Memory[631] <= Memory[632];
				Memory[630] <= Memory[631];
				Memory[629] <= Memory[630];
				Memory[628] <= Memory[629];
				Memory[627] <= Memory[628];
				Memory[626] <= Memory[627];
				Memory[625] <= Memory[626];
				Memory[624] <= Memory[625];
				Memory[623] <= Memory[624];
				Memory[622] <= Memory[623];
				Memory[621] <= Memory[622];
				Memory[620] <= Memory[621];
				Memory[619] <= Memory[620];
				Memory[618] <= Memory[619];
				Memory[617] <= Memory[618];
				Memory[616] <= Memory[617];
				Memory[615] <= Memory[616];
				Memory[614] <= Memory[615];
				Memory[613] <= Memory[614];
				Memory[612] <= Memory[613];
				Memory[611] <= Memory[612];
				Memory[610] <= Memory[611];
				Memory[609] <= Memory[610];
				Memory[608] <= Memory[609];
				Memory[607] <= Memory[608];
				Memory[606] <= Memory[607];
				Memory[605] <= Memory[606];
				Memory[604] <= Memory[605];
				Memory[603] <= Memory[604];
				Memory[602] <= Memory[603];
				Memory[601] <= Memory[602];
				Memory[600] <= Memory[601];
				Memory[599] <= Memory[600];
				Memory[598] <= Memory[599];
				Memory[597] <= Memory[598];
				Memory[596] <= Memory[597];
				Memory[595] <= Memory[596];
				Memory[594] <= Memory[595];
				Memory[593] <= Memory[594];
				Memory[592] <= Memory[593];
				Memory[591] <= Memory[592];
				Memory[590] <= Memory[591];
				Memory[589] <= Memory[590];
				Memory[588] <= Memory[589];
				Memory[587] <= Memory[588];
				Memory[586] <= Memory[587];
				Memory[585] <= Memory[586];
				Memory[584] <= Memory[585];
				Memory[583] <= Memory[584];
				Memory[582] <= Memory[583];
				Memory[581] <= Memory[582];
				Memory[580] <= Memory[581];
				Memory[579] <= Memory[580];
				Memory[578] <= Memory[579];
				Memory[577] <= Memory[578];
				Memory[576] <= Memory[577];
				Memory[575] <= Memory[576];
				Memory[574] <= Memory[575];
				Memory[573] <= Memory[574];
				Memory[572] <= Memory[573];
				Memory[571] <= Memory[572];
				Memory[570] <= Memory[571];
				Memory[569] <= Memory[570];
				Memory[568] <= Memory[569];
				Memory[567] <= Memory[568];
				Memory[566] <= Memory[567];
				Memory[565] <= Memory[566];
				Memory[564] <= Memory[565];
				Memory[563] <= Memory[564];
				Memory[562] <= Memory[563];
				Memory[561] <= Memory[562];
				Memory[560] <= Memory[561];
				Memory[559] <= Memory[560];
				Memory[558] <= Memory[559];
				Memory[557] <= Memory[558];
				Memory[556] <= Memory[557];
				Memory[555] <= Memory[556];
				Memory[554] <= Memory[555];
				Memory[553] <= Memory[554];
				Memory[552] <= Memory[553];
				Memory[551] <= Memory[552];
				Memory[550] <= Memory[551];
				Memory[549] <= Memory[550];
				Memory[548] <= Memory[549];
				Memory[547] <= Memory[548];
				Memory[546] <= Memory[547];
				Memory[545] <= Memory[546];
				Memory[544] <= Memory[545];
				Memory[543] <= Memory[544];
				Memory[542] <= Memory[543];
				Memory[541] <= Memory[542];
				Memory[540] <= Memory[541];
				Memory[539] <= Memory[540];
				Memory[538] <= Memory[539];
				Memory[537] <= Memory[538];
				Memory[536] <= Memory[537];
				Memory[535] <= Memory[536];
				Memory[534] <= Memory[535];
				Memory[533] <= Memory[534];
				Memory[532] <= Memory[533];
				Memory[531] <= Memory[532];
				Memory[530] <= Memory[531];
				Memory[529] <= Memory[530];
				Memory[528] <= Memory[529];
				Memory[527] <= Memory[528];
				Memory[526] <= Memory[527];
				Memory[525] <= Memory[526];
				Memory[524] <= Memory[525];
				Memory[523] <= Memory[524];
				Memory[522] <= Memory[523];
				Memory[521] <= Memory[522];
				Memory[520] <= Memory[521];
				Memory[519] <= Memory[520];
				Memory[518] <= Memory[519];
				Memory[517] <= Memory[518];
				Memory[516] <= Memory[517];
				Memory[515] <= Memory[516];
				Memory[514] <= Memory[515];
				Memory[513] <= Memory[514];
				Memory[512] <= Memory[513];
				Memory[511] <= Memory[512];
				Memory[510] <= Memory[511];
				Memory[509] <= Memory[510];
				Memory[508] <= Memory[509];
				Memory[507] <= Memory[508];
				Memory[506] <= Memory[507];
				Memory[505] <= Memory[506];
				Memory[504] <= Memory[505];
				Memory[503] <= Memory[504];
				Memory[502] <= Memory[503];
				Memory[501] <= Memory[502];
				Memory[500] <= Memory[501];
				Memory[499] <= Memory[500];
				Memory[498] <= Memory[499];
				Memory[497] <= Memory[498];
				Memory[496] <= Memory[497];
				Memory[495] <= Memory[496];
				Memory[494] <= Memory[495];
				Memory[493] <= Memory[494];
				Memory[492] <= Memory[493];
				Memory[491] <= Memory[492];
				Memory[490] <= Memory[491];
				Memory[489] <= Memory[490];
				Memory[488] <= Memory[489];
				Memory[487] <= Memory[488];
				Memory[486] <= Memory[487];
				Memory[485] <= Memory[486];
				Memory[484] <= Memory[485];
				Memory[483] <= Memory[484];
				Memory[482] <= Memory[483];
				Memory[481] <= Memory[482];
				Memory[480] <= Memory[481];
				Memory[479] <= Memory[480];
				Memory[478] <= Memory[479];
				Memory[477] <= Memory[478];
				Memory[476] <= Memory[477];
				Memory[475] <= Memory[476];
				Memory[474] <= Memory[475];
				Memory[473] <= Memory[474];
				Memory[472] <= Memory[473];
				Memory[471] <= Memory[472];
				Memory[470] <= Memory[471];
				Memory[469] <= Memory[470];
				Memory[468] <= Memory[469];
				Memory[467] <= Memory[468];
				Memory[466] <= Memory[467];
				Memory[465] <= Memory[466];
				Memory[464] <= Memory[465];
				Memory[463] <= Memory[464];
				Memory[462] <= Memory[463];
				Memory[461] <= Memory[462];
				Memory[460] <= Memory[461];
				Memory[459] <= Memory[460];
				Memory[458] <= Memory[459];
				Memory[457] <= Memory[458];
				Memory[456] <= Memory[457];
				Memory[455] <= Memory[456];
				Memory[454] <= Memory[455];
				Memory[453] <= Memory[454];
				Memory[452] <= Memory[453];
				Memory[451] <= Memory[452];
				Memory[450] <= Memory[451];
				Memory[449] <= Memory[450];
				Memory[448] <= Memory[449];
				Memory[447] <= Memory[448];
				Memory[446] <= Memory[447];
				Memory[445] <= Memory[446];
				Memory[444] <= Memory[445];
				Memory[443] <= Memory[444];
				Memory[442] <= Memory[443];
				Memory[441] <= Memory[442];
				Memory[440] <= Memory[441];
				Memory[439] <= Memory[440];
				Memory[438] <= Memory[439];
				Memory[437] <= Memory[438];
				Memory[436] <= Memory[437];
				Memory[435] <= Memory[436];
				Memory[434] <= Memory[435];
				Memory[433] <= Memory[434];
				Memory[432] <= Memory[433];
				Memory[431] <= Memory[432];
				Memory[430] <= Memory[431];
				Memory[429] <= Memory[430];
				Memory[428] <= Memory[429];
				Memory[427] <= Memory[428];
				Memory[426] <= Memory[427];
				Memory[425] <= Memory[426];
				Memory[424] <= Memory[425];
				Memory[423] <= Memory[424];
				Memory[422] <= Memory[423];
				Memory[421] <= Memory[422];
				Memory[420] <= Memory[421];
				Memory[419] <= Memory[420];
				Memory[418] <= Memory[419];
				Memory[417] <= Memory[418];
				Memory[416] <= Memory[417];
				Memory[415] <= Memory[416];
				Memory[414] <= Memory[415];
				Memory[413] <= Memory[414];
				Memory[412] <= Memory[413];
				Memory[411] <= Memory[412];
				Memory[410] <= Memory[411];
				Memory[409] <= Memory[410];
				Memory[408] <= Memory[409];
				Memory[407] <= Memory[408];
				Memory[406] <= Memory[407];
				Memory[405] <= Memory[406];
				Memory[404] <= Memory[405];
				Memory[403] <= Memory[404];
				Memory[402] <= Memory[403];
				Memory[401] <= Memory[402];
				Memory[400] <= Memory[401];
				Memory[399] <= Memory[400];
				Memory[398] <= Memory[399];
				Memory[397] <= Memory[398];
				Memory[396] <= Memory[397];
				Memory[395] <= Memory[396];
				Memory[394] <= Memory[395];
				Memory[393] <= Memory[394];
				Memory[392] <= Memory[393];
				Memory[391] <= Memory[392];
				Memory[390] <= Memory[391];
				Memory[389] <= Memory[390];
				Memory[388] <= Memory[389];
				Memory[387] <= Memory[388];
				Memory[386] <= Memory[387];
				Memory[385] <= Memory[386];
				Memory[384] <= Memory[385];
				Memory[383] <= Memory[384];
				Memory[382] <= Memory[383];
				Memory[381] <= Memory[382];
				Memory[380] <= Memory[381];
				Memory[379] <= Memory[380];
				Memory[378] <= Memory[379];
				Memory[377] <= Memory[378];
				Memory[376] <= Memory[377];
				Memory[375] <= Memory[376];
				Memory[374] <= Memory[375];
				Memory[373] <= Memory[374];
				Memory[372] <= Memory[373];
				Memory[371] <= Memory[372];
				Memory[370] <= Memory[371];
				Memory[369] <= Memory[370];
				Memory[368] <= Memory[369];
				Memory[367] <= Memory[368];
				Memory[366] <= Memory[367];
				Memory[365] <= Memory[366];
				Memory[364] <= Memory[365];
				Memory[363] <= Memory[364];
				Memory[362] <= Memory[363];
				Memory[361] <= Memory[362];
				Memory[360] <= Memory[361];
				Memory[359] <= Memory[360];
				Memory[358] <= Memory[359];
				Memory[357] <= Memory[358];
				Memory[356] <= Memory[357];
				Memory[355] <= Memory[356];
				Memory[354] <= Memory[355];
				Memory[353] <= Memory[354];
				Memory[352] <= Memory[353];
				Memory[351] <= Memory[352];
				Memory[350] <= Memory[351];
				Memory[349] <= Memory[350];
				Memory[348] <= Memory[349];
				Memory[347] <= Memory[348];
				Memory[346] <= Memory[347];
				Memory[345] <= Memory[346];
				Memory[344] <= Memory[345];
				Memory[343] <= Memory[344];
				Memory[342] <= Memory[343];
				Memory[341] <= Memory[342];
				Memory[340] <= Memory[341];
				Memory[339] <= Memory[340];
				Memory[338] <= Memory[339];
				Memory[337] <= Memory[338];
				Memory[336] <= Memory[337];
				Memory[335] <= Memory[336];
				Memory[334] <= Memory[335];
				Memory[333] <= Memory[334];
				Memory[332] <= Memory[333];
				Memory[331] <= Memory[332];
				Memory[330] <= Memory[331];
				Memory[329] <= Memory[330];
				Memory[328] <= Memory[329];
				Memory[327] <= Memory[328];
				Memory[326] <= Memory[327];
				Memory[325] <= Memory[326];
				Memory[324] <= Memory[325];
				Memory[323] <= Memory[324];
				Memory[322] <= Memory[323];
				Memory[321] <= Memory[322];
				Memory[320] <= Memory[321];
				Memory[319] <= Memory[320];
				Memory[318] <= Memory[319];
				Memory[317] <= Memory[318];
				Memory[316] <= Memory[317];
				Memory[315] <= Memory[316];
				Memory[314] <= Memory[315];
				Memory[313] <= Memory[314];
				Memory[312] <= Memory[313];
				Memory[311] <= Memory[312];
				Memory[310] <= Memory[311];
				Memory[309] <= Memory[310];
				Memory[308] <= Memory[309];
				Memory[307] <= Memory[308];
				Memory[306] <= Memory[307];
				Memory[305] <= Memory[306];
				Memory[304] <= Memory[305];
				Memory[303] <= Memory[304];
				Memory[302] <= Memory[303];
				Memory[301] <= Memory[302];
				Memory[300] <= Memory[301];
				Memory[299] <= Memory[300];
				Memory[298] <= Memory[299];
				Memory[297] <= Memory[298];
				Memory[296] <= Memory[297];
				Memory[295] <= Memory[296];
				Memory[294] <= Memory[295];
				Memory[293] <= Memory[294];
				Memory[292] <= Memory[293];
				Memory[291] <= Memory[292];
				Memory[290] <= Memory[291];
				Memory[289] <= Memory[290];
				Memory[288] <= Memory[289];
				Memory[287] <= Memory[288];
				Memory[286] <= Memory[287];
				Memory[285] <= Memory[286];
				Memory[284] <= Memory[285];
				Memory[283] <= Memory[284];
				Memory[282] <= Memory[283];
				Memory[281] <= Memory[282];
				Memory[280] <= Memory[281];
				Memory[279] <= Memory[280];
				Memory[278] <= Memory[279];
				Memory[277] <= Memory[278];
				Memory[276] <= Memory[277];
				Memory[275] <= Memory[276];
				Memory[274] <= Memory[275];
				Memory[273] <= Memory[274];
				Memory[272] <= Memory[273];
				Memory[271] <= Memory[272];
				Memory[270] <= Memory[271];
				Memory[269] <= Memory[270];
				Memory[268] <= Memory[269];
				Memory[267] <= Memory[268];
				Memory[266] <= Memory[267];
				Memory[265] <= Memory[266];
				Memory[264] <= Memory[265];
				Memory[263] <= Memory[264];
				Memory[262] <= Memory[263];
				Memory[261] <= Memory[262];
				Memory[260] <= Memory[261];
				Memory[259] <= Memory[260];
				Memory[258] <= Memory[259];
				Memory[257] <= Memory[258];
				Memory[256] <= Memory[257];
				Memory[255] <= Memory[256];
				Memory[254] <= Memory[255];
				Memory[253] <= Memory[254];
				Memory[252] <= Memory[253];
				Memory[251] <= Memory[252];
				Memory[250] <= Memory[251];
				Memory[249] <= Memory[250];
				Memory[248] <= Memory[249];
				Memory[247] <= Memory[248];
				Memory[246] <= Memory[247];
				Memory[245] <= Memory[246];
				Memory[244] <= Memory[245];
				Memory[243] <= Memory[244];
				Memory[242] <= Memory[243];
				Memory[241] <= Memory[242];
				Memory[240] <= Memory[241];
				Memory[239] <= Memory[240];
				Memory[238] <= Memory[239];
				Memory[237] <= Memory[238];
				Memory[236] <= Memory[237];
				Memory[235] <= Memory[236];
				Memory[234] <= Memory[235];
				Memory[233] <= Memory[234];
				Memory[232] <= Memory[233];
				Memory[231] <= Memory[232];
				Memory[230] <= Memory[231];
				Memory[229] <= Memory[230];
				Memory[228] <= Memory[229];
				Memory[227] <= Memory[228];
				Memory[226] <= Memory[227];
				Memory[225] <= Memory[226];
				Memory[224] <= Memory[225];
				Memory[223] <= Memory[224];
				Memory[222] <= Memory[223];
				Memory[221] <= Memory[222];
				Memory[220] <= Memory[221];
				Memory[219] <= Memory[220];
				Memory[218] <= Memory[219];
				Memory[217] <= Memory[218];
				Memory[216] <= Memory[217];
				Memory[215] <= Memory[216];
				Memory[214] <= Memory[215];
				Memory[213] <= Memory[214];
				Memory[212] <= Memory[213];
				Memory[211] <= Memory[212];
				Memory[210] <= Memory[211];
				Memory[209] <= Memory[210];
				Memory[208] <= Memory[209];
				Memory[207] <= Memory[208];
				Memory[206] <= Memory[207];
				Memory[205] <= Memory[206];
				Memory[204] <= Memory[205];
				Memory[203] <= Memory[204];
				Memory[202] <= Memory[203];
				Memory[201] <= Memory[202];
				Memory[200] <= Memory[201];
				Memory[199] <= Memory[200];
				Memory[198] <= Memory[199];
				Memory[197] <= Memory[198];
				Memory[196] <= Memory[197];
				Memory[195] <= Memory[196];
				Memory[194] <= Memory[195];
				Memory[193] <= Memory[194];
				Memory[192] <= Memory[193];
				Memory[191] <= Memory[192];
				Memory[190] <= Memory[191];
				Memory[189] <= Memory[190];
				Memory[188] <= Memory[189];
				Memory[187] <= Memory[188];
				Memory[186] <= Memory[187];
				Memory[185] <= Memory[186];
				Memory[184] <= Memory[185];
				Memory[183] <= Memory[184];
				Memory[182] <= Memory[183];
				Memory[181] <= Memory[182];
				Memory[180] <= Memory[181];
				Memory[179] <= Memory[180];
				Memory[178] <= Memory[179];
				Memory[177] <= Memory[178];
				Memory[176] <= Memory[177];
				Memory[175] <= Memory[176];
				Memory[174] <= Memory[175];
				Memory[173] <= Memory[174];
				Memory[172] <= Memory[173];
				Memory[171] <= Memory[172];
				Memory[170] <= Memory[171];
				Memory[169] <= Memory[170];
				Memory[168] <= Memory[169];
				Memory[167] <= Memory[168];
				Memory[166] <= Memory[167];
				Memory[165] <= Memory[166];
				Memory[164] <= Memory[165];
				Memory[163] <= Memory[164];
				Memory[162] <= Memory[163];
				Memory[161] <= Memory[162];
				Memory[160] <= Memory[161];
				Memory[159] <= Memory[160];
				Memory[158] <= Memory[159];
				Memory[157] <= Memory[158];
				Memory[156] <= Memory[157];
				Memory[155] <= Memory[156];
				Memory[154] <= Memory[155];
				Memory[153] <= Memory[154];
				Memory[152] <= Memory[153];
				Memory[151] <= Memory[152];
				Memory[150] <= Memory[151];
				Memory[149] <= Memory[150];
				Memory[148] <= Memory[149];
				Memory[147] <= Memory[148];
				Memory[146] <= Memory[147];
				Memory[145] <= Memory[146];
				Memory[144] <= Memory[145];
				Memory[143] <= Memory[144];
				Memory[142] <= Memory[143];
				Memory[141] <= Memory[142];
				Memory[140] <= Memory[141];
				Memory[139] <= Memory[140];
				Memory[138] <= Memory[139];
				Memory[137] <= Memory[138];
				Memory[136] <= Memory[137];
				Memory[135] <= Memory[136];
				Memory[134] <= Memory[135];
				Memory[133] <= Memory[134];
				Memory[132] <= Memory[133];
				Memory[131] <= Memory[132];
				Memory[130] <= Memory[131];
				Memory[129] <= Memory[130];
				Memory[128] <= Memory[129];
				Memory[127] <= Memory[128];
				Memory[126] <= Memory[127];
				Memory[125] <= Memory[126];
				Memory[124] <= Memory[125];
				Memory[123] <= Memory[124];
				Memory[122] <= Memory[123];
				Memory[121] <= Memory[122];
				Memory[120] <= Memory[121];
				Memory[119] <= Memory[120];
				Memory[118] <= Memory[119];
				Memory[117] <= Memory[118];
				Memory[116] <= Memory[117];
				Memory[115] <= Memory[116];
				Memory[114] <= Memory[115];
				Memory[113] <= Memory[114];
				Memory[112] <= Memory[113];
				Memory[111] <= Memory[112];
				Memory[110] <= Memory[111];
				Memory[109] <= Memory[110];
				Memory[108] <= Memory[109];
				Memory[107] <= Memory[108];
				Memory[106] <= Memory[107];
				Memory[105] <= Memory[106];
				Memory[104] <= Memory[105];
				Memory[103] <= Memory[104];
				Memory[102] <= Memory[103];
				Memory[101] <= Memory[102];
				Memory[100] <= Memory[101];
				Memory[99] <= Memory[100];
				Memory[98] <= Memory[99];
				Memory[97] <= Memory[98];
				Memory[96] <= Memory[97];
				Memory[95] <= Memory[96];
				Memory[94] <= Memory[95];
				Memory[93] <= Memory[94];
				Memory[92] <= Memory[93];
				Memory[91] <= Memory[92];
				Memory[90] <= Memory[91];
				Memory[89] <= Memory[90];
				Memory[88] <= Memory[89];
				Memory[87] <= Memory[88];
				Memory[86] <= Memory[87];
				Memory[85] <= Memory[86];
				Memory[84] <= Memory[85];
				Memory[83] <= Memory[84];
				Memory[82] <= Memory[83];
				Memory[81] <= Memory[82];
				Memory[80] <= Memory[81];
				Memory[79] <= Memory[80];
				Memory[78] <= Memory[79];
				Memory[77] <= Memory[78];
				Memory[76] <= Memory[77];
				Memory[75] <= Memory[76];
				Memory[74] <= Memory[75];
				Memory[73] <= Memory[74];
				Memory[72] <= Memory[73];
				Memory[71] <= Memory[72];
				Memory[70] <= Memory[71];
				Memory[69] <= Memory[70];
				Memory[68] <= Memory[69];
				Memory[67] <= Memory[68];
				Memory[66] <= Memory[67];
				Memory[65] <= Memory[66];
				Memory[64] <= Memory[65];
				Memory[63] <= Memory[64];
				Memory[62] <= Memory[63];
				Memory[61] <= Memory[62];
				Memory[60] <= Memory[61];
				Memory[59] <= Memory[60];
				Memory[58] <= Memory[59];
				Memory[57] <= Memory[58];
				Memory[56] <= Memory[57];
				Memory[55] <= Memory[56];
				Memory[54] <= Memory[55];
				Memory[53] <= Memory[54];
				Memory[52] <= Memory[53];
				Memory[51] <= Memory[52];
				Memory[50] <= Memory[51];
				Memory[49] <= Memory[50];
				Memory[48] <= Memory[49];
				Memory[47] <= Memory[48];
				Memory[46] <= Memory[47];
				Memory[45] <= Memory[46];
				Memory[44] <= Memory[45];
				Memory[43] <= Memory[44];
				Memory[42] <= Memory[43];
				Memory[41] <= Memory[42];
				Memory[40] <= Memory[41];
				Memory[39] <= Memory[40];
				Memory[38] <= Memory[39];
				Memory[37] <= Memory[38];
				Memory[36] <= Memory[37];
				Memory[35] <= Memory[36];
				Memory[34] <= Memory[35];
				Memory[33] <= Memory[34];
				Memory[32] <= Memory[33];
				Memory[31] <= Memory[32];
				Memory[30] <= Memory[31];
				Memory[29] <= Memory[30];
				Memory[28] <= Memory[29];
				Memory[27] <= Memory[28];
				Memory[26] <= Memory[27];
				Memory[25] <= Memory[26];
				Memory[24] <= Memory[25];
				Memory[23] <= Memory[24];
				Memory[22] <= Memory[23];
				Memory[21] <= Memory[22];
				Memory[20] <= Memory[21];
				Memory[19] <= Memory[20];
				Memory[18] <= Memory[19];
				Memory[17] <= Memory[18];
				Memory[16] <= Memory[17];
				Memory[15] <= Memory[16];
				Memory[14] <= Memory[15];
				Memory[13] <= Memory[14];
				Memory[12] <= Memory[13];
				Memory[11] <= Memory[12];
				Memory[10] <= Memory[11];
				Memory[9] <= Memory[10];
				Memory[8] <= Memory[9];
				Memory[7] <= Memory[8];
				Memory[6] <= Memory[7];
				Memory[5] <= Memory[6];
				Memory[4] <= Memory[5];
				Memory[3] <= Memory[4];
				Memory[2] <= Memory[3];
				Memory[1] <= Memory[2];
				Memory[0] <= Memory[1];
				Memory[1279] <= wave_sample;
				//prev <= wave_sample;
			end		
		
		end
		
    end
    
	//waveform color
	wire [3:0] red;
    wire [3:0] green;
    wire [3:0] blue;
    
    assign red = colour >> 8;
    assign green = colour << 4 >> 8;
    assign blue = colour << 8 >> 8;
	
	assign VGA_Red_waveform = 
	((mode <= 4 && VGA_HORZ_COORD < 1280) && 
    ((waveformstate == 0 && VGA_VERT_COORD == (1024 - Memory[VGA_HORZ_COORD]))
    
    || (waveformstate == 1 && (Memory[VGA_HORZ_COORD] <= 512 ? 
    (VGA_VERT_COORD <= 512 && VGA_VERT_COORD >= (1024 - Memory[VGA_HORZ_COORD])) :
    (VGA_VERT_COORD >= 512 && VGA_VERT_COORD <= (1024 - Memory[VGA_HORZ_COORD])) ))
    
    || (waveformstate == 2 && VGA_VERT_COORD <= 512 && VGA_VERT_COORD >= (1024 - Memory[VGA_HORZ_COORD])))) 
	
	|| (mode == 5 && (VGA_HORZ_COORD < 1279) && VGA_VERT_COORD == (1024 - Memory[VGA_HORZ_COORD - 600])) ? red : 0;
	
	assign VGA_Blue_waveform = 
	((mode <= 4 && VGA_HORZ_COORD < 1280) && 
    ((waveformstate == 0 && VGA_VERT_COORD == (1024 - Memory[VGA_HORZ_COORD]))
    
    || (waveformstate == 1 && (Memory[VGA_HORZ_COORD] <= 512 ? 
    (VGA_VERT_COORD <= 512 && VGA_VERT_COORD >= (1024 - Memory[VGA_HORZ_COORD])) :
    (VGA_VERT_COORD >= 512 && VGA_VERT_COORD <= (1024 - Memory[VGA_HORZ_COORD])) ))
    
    || (waveformstate == 2 && VGA_VERT_COORD <= 512 && VGA_VERT_COORD >= (1024 - Memory[VGA_HORZ_COORD])))) 
	
	|| (mode == 5 && (VGA_HORZ_COORD < 1279) && VGA_VERT_COORD == (1024 - Memory[VGA_HORZ_COORD - 600])) ? blue : 0;
	
	
	assign VGA_Green_waveform = 
	((mode <= 4 && VGA_HORZ_COORD < 1280) && 
    ((waveformstate == 0 && VGA_VERT_COORD == (1024 - Memory[VGA_HORZ_COORD]))
    
    || (waveformstate == 1 && (Memory[VGA_HORZ_COORD] <= 512 ? 
    (VGA_VERT_COORD <= 512 && VGA_VERT_COORD >= (1024 - Memory[VGA_HORZ_COORD])) :
    (VGA_VERT_COORD >= 512 && VGA_VERT_COORD <= (1024 - Memory[VGA_HORZ_COORD])) ))
    
    || (waveformstate == 2 && VGA_VERT_COORD <= 512 && VGA_VERT_COORD >= (1024 - Memory[VGA_HORZ_COORD])))) 
	
	|| (mode == 5 && (VGA_HORZ_COORD < 1279) && VGA_VERT_COORD == (1024 - Memory[VGA_HORZ_COORD - 600])) ? green : 0;
    
    
endmodule
